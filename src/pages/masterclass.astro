---
import { Image } from "astro:assets";
import Layout from "@/layouts/Layout.astro";
import masterclass from '@/images/masterclass.jpg'
import conocimiento from '@/images/conocimiento.png'
import dieta from '@/images/dieta.png'
import portapapeles from '@/images/portapapeles.png'
---

<Layout title="Masterclass - Tu1millon">
	<main class="bg-indigo-200 p-5">
    <h1 class="font-bold xsm:w-full xsm:text-balance xsm:text-center xsm:text-xl md:text-5xl xl:text-7xl">MASTERCLASS GRATUITA Escuela Tu1millon</h1>
    <div class="md:flex md:gap-5 xl:flex-row-reverse xl:justify-center">
      <Image src={masterclass} alt="Masterclass tu1millon" class="rounded-xl mt-5 border border-white md:w-1/2 xl:w-1/4 object-cover object-center" />
      <div class="xl:p-5 xl:w-1/2">
        <p class="mt-3 xsm:text-sm md:text-3xl md:pt-3 xl:text-5xl">Aprende como fui de fregar platos a ser mi mejor versi√≥n y generar +800k al mes como <b>Coach Online.</b></p>
        <p class="italic xsm:text-center xsm:mt-5 xsm:text-sm md:text-3xl md:text-left xl:text-5xl">"Crea la persona que <b>ADMIRAS</b> y <b>RESPETAS</b>, escapa del sistema cambiando vidas con marketing de afiliados"</p>
      </div>
    </div>
    <div class="flex justify-center items-center gap-5 xsm:mt-5">
      <Image src={portapapeles} alt="Icono de portapapeles" class="rounded xsm:w-10 xsm:h-10 xsm:p-1 md:w-16 md:h-16" />
      <Image src={conocimiento} alt="Icono de conocimiento" class="rounded xsm:w-10 xsm:h-10 xsm:p-1 md:w-16 md:h-16" />
      <Image src={dieta} alt="Icono de dieta" class="rounded xsm:w-10 xsm:h-10 xsm:p-1 md:w-16 md:h-16" />
    </div>
    <form id="form_masterclass" class="p-5">
      <div class="md:flex md:gap-5">
        <div class="mb-4 xsm:w-full md:w-1/2">
          <input type="text" id="nombre" name="nombre" class="w-full px-3 py-2 border rounded-md focus:outline-none" placeholder="Nombre">
          <span id="errorNombre" class="text-red-700 hidden">El nombre es requerido</span>
        </div>
        <div class="mb-4 xsm:w-full md:w-1/2">
          <input type="email" id="email" name="email" class="w-full px-3 py-2 border rounded-md focus:outline-none" placeholder="Email">
          <span id="errorEmail" class="text-red-700 hidden">El correo es requerido</span>
        </div>
      </div>
      <button id="send_form" type="button" class="px-4 py-2 bg-yellow-500 text-white rounded-md font-bold hover:bg-yellow-400 xsm:w-full">Accede materclass gratuita</button>
    </form>
  </main>
</Layout>

<script>
  const buttonSend = document.getElementById("send_form")
  function obtenerElemento(id: string): HTMLElement | null {
    return document.getElementById(id);
  }

  function mostrarError(elemento: HTMLElement | null, mensaje: string): void {
    if (elemento) {
      elemento.textContent = mensaje;
      elemento.classList.remove('hidden');
    }
  }

  function ocultarError(elemento: HTMLElement | null): void {
    if (elemento) {
      elemento.textContent = '';
      elemento.classList.add('hidden');
    }
  }

  function validarFormulario(): void {
    const nombreInput = obtenerElemento('nombre') as HTMLInputElement;
    const emailInput = obtenerElemento('email') as HTMLInputElement;
    const errorNombre = obtenerElemento('errorNombre');
    const errorEmail = obtenerElemento('errorEmail');

    if (!nombreInput.value.trim()) {
      mostrarError(errorNombre, 'El nombre es requerido');
    } else {
      ocultarError(errorNombre);
    }

    if (!emailInput.value.trim()) {
      mostrarError(errorEmail, 'El correo es requerido');
    } else {
      ocultarError(errorEmail);
    }

    if (nombreInput.value.trim() && emailInput.value.trim()) {
      const formulario = obtenerElemento('miFormulario') as HTMLFormElement;
      if (formulario) formulario.submit();
    }
  }

  if (buttonSend) {
    buttonSend.addEventListener("click", () => {
      validarFormulario()
    })
  }
</script>